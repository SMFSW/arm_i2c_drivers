<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>I2C_Drivers (ARM): ARM I2C drivers &lt;a href=&quot;https://app.travis-ci.com/SMFSW/arm_i2c_drivers&quot; &gt;&lt;img src=&quot;https://app.travis-ci.com/SMFSW/arm_i2c_drivers.svg?branch=master&quot; alt=&quot;Build Status&quot;/&gt;&lt;/a&gt;</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">I2C_Drivers (ARM)<span id="projectnumber">&#160;1.1</span>
   </div>
   <div id="projectbrief">SMFSW collection of HAL I2C Drivers for ARM</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',false);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="doc-content">
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){ initResizable(false); });
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">ARM I2C drivers <a href="https://app.travis-ci.com/SMFSW/arm_i2c_drivers"><img src="https://app.travis-ci.com/SMFSW/arm_i2c_drivers.svg?branch=master" alt="Build Status" style="pointer-events: none;" class="inline"/></a> </div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="md__r_e_a_d_m_e"></a> ARM I2C Drivers for various components</p>
<h1>Requires</h1>
<ul>
<li>sarmfsw<ul>
<li><a href="https://github.com/SMFSW/sarmfsw">sarmfsw</a></li>
</ul>
</li>
<li>HARMcksL (following used components(s))<ul>
<li><a href="https://github.com/SMFSW/HARMcksL">HARMcksL</a></li>
</ul>
</li>
</ul>
<h1>Usage</h1>
<ul>
<li>define <code>I2C_$CPNT$</code> in a file called globals.h with the I2C instance you want it to be tied to (no neeed to declare instance in case of multiple devices)</li>
<li>define <code>I2C_$CPNT$_NB</code> with number of devices to enable multiple devices</li>
<li>define <code>$CPNT$_BASE_ADDR</code> with base device address if in the need to override default address defined in header</li>
<li>use <code>$CPNT$_Init(idx, hi2c, devAddress)</code> for every device with its index, proper instance and I2C address<ul>
<li>I2CMEM type is generic and needs 2 more parameters: storage size and write buffer size (can be set to 0 for FRAM)</li>
</ul>
</li>
<li>use <code>$CPNT$_Init_Single()</code> once in case of single device using defaults<ul>
<li>I2CMEM type is generic and needs 2 parameters: storage size and write buffer size (can be set to 0 for FRAM)</li>
</ul>
</li>
<li>start using <code>$CPNT$_funcs()</code></li>
</ul>
<h1>Remarks</h1>
<ul>
<li>define <code>VERBOSE</code> in compiler options to printf infos from component handlers</li>
<li>define <code>NO_WARN_I2C_DRIVERS</code> at project level to disable possible warning messages when multiple devices declared which may have same address</li>
<li>Components with a xxx_proc file can access <code>I2C_slave</code> instance through <code>CPNT-&gt;cfg.slave_inst</code>. Please keep in mind some components are somewhat custom and needs to be accesses through <code>CPNT-&gt;cfg.slave_inst_xxx</code> instead if needed.</li>
</ul>
<h1>Supported devices</h1>
<h2>EEPROM / FRAM:</h2>
<ul>
<li><b>I2CMEM</b>: Any EEPROM / FRAM<ul>
<li><b>STATUS</b>: DONE</li>
<li>Use I2CMEM when compatibility between EEPROM/FRAM is needed</li>
<li>Check <a href="I2CMEM_ex.h">I2CMEM_ex.h</a> for a few components init aliases</li>
<li>In case FRAM is only useful, you may use legacy FM24C or MB85RC256V components, or set buf_size to I2CMEM_WBUF_NONE at init</li>
<li>Transaction timeout set to 500ms:<ul>
<li>There shouldn't be any timeout reached for these components, otherwise refer to MB85RC256V comment</li>
</ul>
</li>
</ul>
</li>
<li><b>FM24C</b>: 4/16-Kbit (512/2K * 8) Serial I2C F-RAM<ul>
<li><b>STATUS</b>: DONE</li>
<li>I2C_Drivers legacy FRAM component, consider switching to I2CMEM for new designs</li>
<li>Use FM24C for I2C addresses banked components (with 8b internal address):<ul>
<li>Tested on:<ul>
<li>FM24C16B</li>
<li>FM24C04B</li>
<li>BR24T04FVM</li>
</ul>
</li>
</ul>
</li>
<li>Transaction timeout set to 500ms:<ul>
<li>There shouldn't be any timeout reached for these components, otherwise refer to MB85RC256V comment</li>
</ul>
</li>
</ul>
</li>
<li><b>MB85RC256V</b>: 256-Kbit (32K * 8) I2C Memory FRAM<ul>
<li><b>STATUS</b>: DONE</li>
<li>I2C_Drivers legacy FRAM component, consider switching to I2CMEM for new designs</li>
<li>Use MB85RC256V for 16b internal addresses components:<ul>
<li>Tested on:<ul>
<li>MB85RC256V</li>
<li>FM24CL64B</li>
</ul>
</li>
</ul>
</li>
<li>Transaction timeout set to 500ms:<ul>
<li>For bigger size components, in case timeout is reached, read/write transactions may be split in multiple calls (refreshing watchdog if in use).</li>
<li>Set a longer timeout by calling I2C_set_slave_timeout in init sequence is another way to address such a need</li>
</ul>
</li>
</ul>
</li>
</ul>
<h2>OTHER:</h2>
<ul>
<li><b>ADS1115</b>: Ultra-Small, Low-Power, 16-Bit Analog-to-Digital Converter with Internal Reference<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>AMG88</b>: Infrared Array Sensor (Grid-EYE)<ul>
<li><b>STATUS</b>: DONE (TODO: recognition)</li>
</ul>
</li>
<li><b>APDS9930</b>: Digital Proximity and Ambient Light Sensor<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>APDS9960</b>: Digital Proximity, Ambient Light, RGB and Gesture Sensor<ul>
<li><b>STATUS</b>: DONE (TODO: GESTURES TO TEST/SWITCH, DISABLED YET)</li>
</ul>
</li>
<li><b>AT42QT1244</b>: 24-key QMatrix FMEA IEC/EN/UL60730 Touch Sensor<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>BMP180</b>: Digital pressure sensor<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>DRV2605L</b>: 2 to 5.2V Haptic Driver for LRA and ERM With Effect Library and Smart-Loop Architecture<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>DS-GPM.S</b>: 99 Channel Positioning System (GPS + GLONASS) Shield<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>MCP4725</b>: 12-Bit Digital-to-Analog Converter with EEPROM Memory<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>MCP9808</b>: +/-0.5C Maximum Accuracy Digital Temperature Sensor<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>MTCH6102</b>: Low-Power Projected Capacitive Touch Controller<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>NCA9595</b>: Low-voltage 16-bit IÂ²C and SMBus I/O expander<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>PCA9532</b>: 16-bit I2C-bus LED dimmer<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>PCA9624</b>: 8-bit Fm+ I2C-bus 100mA 40V LED driver<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>PCA9685</b>: 16-channel, 12-bit PWM Fm+ I2C-bus LED controller<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>PCA9952</b>: 16-channel Fm+ I2C-bus 57 mA constant current LED driver (compatible with PCA9955)<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>PCA9956</b>: 24-channel Fm+ I2C-bus 57 mA/20 V constant current LED driver<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>PCF8523</b>: Real-Time Clock (RTC) and calendar<ul>
<li><b>STATUS</b>: DONE (TODO: handle clkout and alarms)</li>
</ul>
</li>
<li><b>S11059</b>: I2C interface-compatible color sensor<ul>
<li><b>STATUS</b>: DONE</li>
</ul>
</li>
<li><b>TCS3400</b>: Color light-to-digital converter<ul>
<li><b>STATUS</b>: DONE (TODO: auto-integration &amp; persistence in the works)</li>
</ul>
</li>
<li><b>TCS3472</b>: Color light-to-digital converter with IR filter<ul>
<li><b>STATUS</b>: DONE (TODO: auto-integration &amp; persistence in the works)</li>
</ul>
</li>
<li><b>TSL2591</b>: Very-high sensitivity light-to-digital converter<ul>
<li><b>STATUS</b>: DONE (TODO: auto-integration &amp; persistence in the works)</li>
</ul>
</li>
</ul>
<h1>Multiple component type on single project (singleton components excluded)</h1>
<ul>
<li>If multiple component type are used on the same MCU device:<ul>
<li>A for loop can be used passing I2C_$CPNT$ if all components are tied to the same i2C instance (physical bus)</li>
<li>In case same multiple same component type are used on different physical busses, please pass each instance to $CPNT$_Init<ul>
<li>note: formerly, I2C_$CPNT$ was used to determine device type enabling (and its instance); as long as enabled with former I2C_$CPNT$, init function can be called using other params</li>
</ul>
</li>
</ul>
</li>
</ul>
<h1>Following peripherals (?)</h1>
<ul>
<li>Capacitive (MPR121)</li>
<li>OLED</li>
<li>Clock Generator (SI5351 with help of <a href="https://github.com/etherkit/Si5351Arduino">etherkit</a>)</li>
<li>Accelerometer/Gyro (GY521 MPU6050 with help of <a href="https://github.com/jrowberg/i2cdevlib/">jrowberg</a>)</li>
<li>...</li>
</ul>
<p>You may also:</p>
<ul>
<li>contribute with more devices using templates in subfolder<ul>
<li>if in doubt, <code>multiple</code> template implementation is recommended</li>
</ul>
</li>
<li>raise issue on github to ask for particular devices</li>
</ul>
<h1>Limitations</h1>
<ul>
<li>Compatibility with interrupt driven R/W transactions (when possible &amp; usefull, yet already tested manually on some components)</li>
</ul>
<h1>TODO</h1>
<ul>
<li>Any RTOS compatibility (blocking transactions doesn't match with RTOS task timings)</li>
<li>(FreeRTOS) compatibility using R/W functions using interrupts with callbacks (when possible)</li>
</ul>
<h1>Misc</h1>
<p>Feel free to share your thoughts @ <a href="#" onclick="location.href='mai'+'lto:'+'xga'+'rm'+'anb'+'oz'+'iax'+'@g'+'mai'+'l.'+'com'; return false;">xgarm<span class="obfuscator">.nosp@m.</span>anbo<span class="obfuscator">.nosp@m.</span>ziax@<span class="obfuscator">.nosp@m.</span>gmai<span class="obfuscator">.nosp@m.</span>l.com</a> about:</p>
<ul>
<li>issues encountered (might also raise issue on github directly)</li>
<li>optimizations</li>
<li>improvements &amp; new functionalities</li>
</ul>
<h1>Documentation</h1>
<p>Doxygen documentation can be generated using "Doxyfile"</p>
<p>See <a href="https://smfsw.github.io/arm_i2c_drivers/">generated documentation</a></p>
<h1>Release Notes</h1>
<p>See <a class="el" href="db/d89/md__release_notes.html">release notes</a> </p>
</div></div><!-- PageDoc -->
<a href="doxygen_crawl.html"/>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0
</small></address>
</div><!-- doc-content -->
</body>
</html>
